knitr::opts_chunk$set(echo = TRUE)
#train data
train <- read.csv('../data/train.csv')
#train data
train <- read.csv('..\data\train.csv')
#train data
train <- read.csv('data/train.csv')
test <- read.csv('data/test.csv')
train <- read.csv('data/sample_submission.csv')
#additional data included
items <- read.csv('data/items.csv')
categories <- read.csv('data/item_categories.csv')
shops <- read.csv("data/shops.csv")
dim(train)
Dim(test)
dim(test)
print("train", dim(train))
print("train") dim(train
print("train")
dim(train)
dim(train)
dim(test)
View(test)
View(test)
View(train)
View(train)
train <- read.csv('data/train.csv')
#test data & Kaggle sample sub
test <- read.csv('data/test.csv')
sample_sub <- read.csv('data/sample_submission.csv')
#additional data included
items <- read.csv('data/items.csv')
categories <- read.csv('data/item_categories.csv')
shops <- read.csv("data/shops.csv")
dim(train)
dim(test)
View(train)
View(train)
View(test)
View(test)
head(train)
dim(train)
head(train)
dim(test)
head(test)
View(sample_sub)
dim(train)
head(train)
dim(test)
head(test)
head(sample_sub)
train$item_cnt_month <- aggregate(train$item_cnt_day,
by=list(train$date_block_num, train$shop_id, train$item_id),
FUN=sum, na.rm=TRUE)
train$item_cnt_month <- aggregate(train$item_cnt_day,
by=group(train$date_block_num, train$shop_id, train$item_id),
FUN=sum)
#First set year variables
train$year <- substr(train$date, nchar(4)-n+1)
#First set year variables
train$year <- substr(train$date, -4)
train$year <- substr(train$date, -4, -1)
#First set year variables
train$year <- substr(train$date, 6, 9)
View(train)
#First set year variables
train$year <- substr(train$date, 7, 10)
sapply(train, class)
train$year <- as.numeric(train$year)
sapply(train, class)
train$date <- as.Date(train$date, "%d/%m/%Y")
sapply(train, class)
#train data
train <- read.csv('data/train.csv')
#test data & Kaggle sample sub
test <- read.csv('data/test.csv')
sample_sub <- read.csv('data/sample_submission.csv')
#additional data included
items <- read.csv('data/items.csv')
categories <- read.csv('data/item_categories.csv')
shops <- read.csv("data/shops.csv")
train$year <- substr(train$date, 7, 10)
train$year <- as.numeric(train$year)
train$date <- as.Date(train$date)
train$date <- as.Date(train$date, "%d/%m/%Y")
train$date[0]
Sys.setlocale("LC_TIME", lct)
Sys.getlocale("LC_TIME")
Sys.setlocale("LC_TIME", "C")
Sys.setlocale("LC_TIME", "C")
train <- read.csv('data/train.csv')
#test data & Kaggle sample sub
test <- read.csv('data/test.csv')
sample_sub <- read.csv('data/sample_submission.csv')
#additional data included
items <- read.csv('data/items.csv')
categories <- read.csv('data/item_categories.csv')
shops <- read.csv("data/shops.csv")
train <- read.csv('data/train.csv'stringsAsFactors = FALSE)
train <- read.csv('data/train.csv', stringsAsFactors = FALSE)
train$year <- substr(train$date, 7, 10)
train$year <- as.numeric(train$year)
train$date <- as.Date(train$date, "%d/%m/%Y")
train <- read.csv('data/train.csv', stringsAsFactors = FALSE)
#test data & Kaggle sample sub
test <- read.csv('data/test.csv')
sample_sub <- read.csv('data/sample_submission.csv')
#additional data included
items <- read.csv('data/items.csv')
categories <- read.csv('data/item_categories.csv')
shops <- read.csv("data/shops.csv")
train$year <- substr(train$date, 7, 10)
train$year <- as.numeric(train$year)
train$date <- as.Date(train$date, "%d.%m.%Y")
sapply(train, class)
train$item_cnt_month <- aggregate(item_cnt_day ~ date_block_num + shop_id + item_id,
data = train, FUN=sum)
train$item_cnt_month <- aggregate(item_cnt_day ~ year + date_block_num + shop_id + item_id,
data = train, FUN=sum)
train$item_cnt_month <- sum(item_cnt_day ~ year + date_block_num + + shop_id + item_id)
train$item_cnt_month <- lapply(train, sum(item_cnt_day ~ year + date_block_num + + shop_id + item_id))
train$item_cnt_month <- tapply(item_cnt_day ~ year + date_block_num + + shop_id + item_id,
data = train, FUN=sum)
train$item_cnt_month <- tapply(train$item_cnt_day,  train$year + train$date_block_num + train$shop_id + train$item_id,
FUN=sum)
train$item_cnt_month <- aggregate(item_cnt_day ~ year + date_block_num + + shop_id + item_id,
data = train, FUN=sum)
item_cnt_month <- aggregate(item_cnt_day ~ year + date_block_num + + shop_id + item_id,
data = train, FUN=sum)
View(item_cnt_month)
View(items)
train <- read.csv('data/train.csv', stringsAsFactors = FALSE)
#test data & Kaggle sample sub
test <- read.csv('data/test.csv')
sample_sub <- read.csv('data/sample_submission.csv')
#additional data included
items <- read.csv('data/items.csv')
categories <- read.csv('data/item_categories.csv')
shops <- read.csv("data/shops.csv")
```{r explore}
dim(train)
head(train)
dim(test)
head(test)
head(sample_sub)
train$year <- substr(train$date, 7, 10)
train$year <- as.numeric(train$year)
train$month <- substr(train$date, 4, 5)
train$month <- as.numeric(train$year)
train$month <- substr(train$date, 4, 5)
train$month <- as.numeric(train$month)
train$date <- as.Date(train$date, "%d.%m.%Y")
sapply(train, class)
item_cnt_month <- aggregate(item_cnt_day ~ year + month + date_block_num + shop_id + item_id +
price, data = train, FUN=sum)
item_cnt_month <- aggregate(item_cnt_day ~ year + month + date_block_num + shop_id + item_id +
item_price, data = train, FUN=sum)
View(item_cnt_month)
train_month <- aggregate(item_cnt_day ~ year + month + date_block_num + shop_id + item_id,
data = train, FUN=sum)
names(train_month)[names(train_month) == 'item_cnt_day'] <- 'item_cnt_month'
drop(item_cnt_month)
remove(item_cnt_month)
View(train_month)
sapply(train, function(x) sum(is.na(x)))
nrow(train)
train_month <- cbind(train_month, apply(train_month,1, 34))
for (i in 1:nrow(train_month)){
train_month[1,7] = 34
}
View(train_month)
for (i in 1:nrow(train_month)){
train_month[i,7] = 34
}
train <- read.csv('data/train.csv', stringsAsFactors = FALSE)
#test data & Kaggle sample sub
test <- read.csv('data/test.csv')
sample_sub <- read.csv('data/sample_submission.csv')
#additional data included
items <- read.csv('data/items.csv')
categories <- read.csv('data/item_categories.csv')
shops <- read.csv("data/shops.csv")
train$year <- substr(train$date, 7, 10)
train$year <- as.numeric(train$year)
train$month <- substr(train$date, 4, 5)
train$month <- as.numeric(train$month)
train$date <- as.Date(train$date, "%d.%m.%Y")
sapply(train, class)
train_month <- aggregate(item_cnt_day ~ year + month + date_block_num + shop_id + item_id,
data = train, FUN=sum)
names(train_month)[names(train_month) == 'item_cnt_day'] <- 'item_cnt_month'
for (i in 1:nrow(test)){
test[i,4] = 34
}
names(train_month)[names(train_month) == 'V4'] <- 'date_block_num'
View(test)
names(train_month)[4] <- 'date_block_num'
colnames(train_month)[4] <- c('date_block_num')
colnames(test)[4] <- c('date_block_num')
train_month <- aggregate(item_cnt_day ~ year + month + date_block_num + shop_id + item_id,
data = train, FUN=sum)
names(train_month)[names(train_month) == 'item_cnt_day'] <- 'item_cnt_month'
for (i in 1:nrow(test)){
test[i,4] = 34
test[i, 5] = 2015
test[i, 6] = 11
}
colnames(test)[4:6] <- c('date_block_num', 'year', 'month')
save.image("D:/Projects/kaggle/time_series/working_files.RData")
